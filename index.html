---
layout: default
---


<h2>
  Schedule
  <!-- add a query param on ics link to bypass cache for testing (e.g. ?foo) -->
  <a target="_blank"
     href="http://www.google.com/calendar/render?cid=http://raceconditionrunning.com/rcc.ics">
    <img src='img/cal-icon.png' height='25px'>
  </a>
</h2>


<p>
  If you are having trouble accessing the calendar, try manually by adding
  the following url to your calendar application:
  <a href = "http://raceconditionrunning.com/rcc.ics"> http://raceconditionrunning.com/rcc.ics </a>
</p>

<h2>Strava</h2>
<p>
  We have a <a href="https://www.strava.com/clubs/raceconditionrunning">Strava
  club</a>! Join and help us increase our weekly club miles!
</p>

<h3>Weekend Haiku</h3>

<p style='font-style: italic; line-height: 25px; margin-left: 20px;'>
  meet at run start point<br>
  chit chat conversation pace<br>
  brunch nearby after
</p>
<p>
  Please let us know on the UW CSE Slack or RCR Facebook page
  if you're joining and arrive 10 minutes before run!
</p>
<div id='schedule'>
  <table id='runs'></table>
</div>

<h3>Tuesday</h3>

<p>Meet in CSE atrium at 4:40 pm and do 3-4 miles. Run starts at 4:45 pm sharp! </p>

<h3>Thursday</h3>

<p>Meet in CSE atrium at 4:40 pm and do 6-8 miles. Run starts at 4:45 pm sharp! </p>

<h2>Photo Album</h2>
<p>Check out our photos <a href = "https://photos.app.goo.gl/DW9MRhNTi2vLwYor1">here</a>!</p>

<!--
<p style='padding-top: 20px;'>
<div class="row">
  <div class="column">
    <img src='img/race-condition-running2.jpg' style="width:100%">
  </div>
  <div class="column">
    <img src='img/race-condition-running1.jpg' style="width:100%">
  </div>
</div>
</p>
-->


{% include photo_carousel.html %}

<h2>Routes</h2>

<div id='routes'>
  <ul id='route-list'></ul>
</div>


<script>
$(function() {
  var ROUTES;
  var SCHED;

  function lkup(uid) {
    for(var i = 0; i < ROUTES.length; i++) {
      var r = ROUTES[i];
      if(r.uid == uid) {
        return r;
      }
    }
    console.log("lkup: could not find " + uid);
  }

  var monthName =
    [ "Jan", "Feb", "Mar", "Apr", "May", "Jun"
    , "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
    ];


  function main() {
    dispRoutes();
    dispSched();
  }

  function dispRoutes() {
    for(var i = 0; i < ROUTES.length; i++) {
      $("<li/>", {
        html: fmtRoute(ROUTES[i])
      }).appendTo("#route-list");
    }
  }

  function fmtRoute(r) {
    var d = (Math.round(r.dist * 100) / 100).toFixed(2);
    return "<a target='_blank' href='" + r.map + "'>"
         + "<span class='fll'>" + r.name + "</span>"
         + "<span class='flr'>" + d + "</span>"
         + "</a>";
  }

  function dispSched() {
    var today = new Date();
    var afterNext = false;

    var entries = [];
    for(var i = 0; i < SCHED.length; i++) {
      var run = SCHED[i];
      var date = new Date(run.date);

      // figure age with date after run
      var ndate = new Date(run.date);
      ndate.setDate(ndate.getDate() + 1);

      var age = "past";
      if(today < ndate) {
        if(!afterNext) {
          age = "next";
          afterNext = true;
        } else {
          age = "future";
        }
      }

      for(var j = 0; j < run.plan.length; j++) {
        var phase = run.plan[j];
        var route = lkup(phase.route);
        var entry = { date: ""
                    , time: phase.time
                    , name: route.name
                    , map:  route.map
                    , dist: route.dist
                    , age:  age
                    };
        if(j == 0) {
          var M = monthName[date.getMonth()];
          var D = date.getDate() + 1;
          entry.date = M + " " + D;
        }
        entries.push(entry);
      }
      entries.push(null);
    }

    for(var i = 0; i < entries.length; i++) {
      var e = entries[i];
      var row = "";
      if(e == null) {
        row = "<tr class='spacer'></tr>";
      } else {
        row = "<tr class='" + e.age + "'>"
            + "<td class='date'>" + e.date + "</td>"
            + "<td class='time'>" + e.time + "</td>"
            + "<td nowrap>"
            +    "<a target='_blank' href='" + e.map + "'>"
            +    e.name +  "</a>"
            +    "&nbsp; (" + e.dist + ")"
            + "</td>"
            + "</tr>";
      }
      $("#runs").append(row);
    }
  }

  $.getJSON("routedb.json", function(data) {
    ROUTES = data.routes;
    $.getJSON("sched.json", function(data) {
      SCHED = data.sched;
      main();
    })
  });
});
</script>
